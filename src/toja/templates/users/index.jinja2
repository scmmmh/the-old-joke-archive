{% extends 'toja:templates/layout/default.jinja2' %}

{% block title %}The Old Joke Archive Users{% endblock title %}

{% block main %}
{% from 'toja:templates/macros/icons.jinja2' import icon %}
<section class="grid">
  <div class="cell-1-7">
    <h1 class="alt-font">Users</h1>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>E-Mail</th>
          <th>Status</th>
          <th>Trust</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
          <tr>
            <td><a href="{{ 'user.view'|route_url(uid=user.id) }}">{{ user.attributes.name }}</a></td>
            <td><a href="mailto:{{ user.email }}">{{ user.email }}</a></td>
            <td>{{ user.status }}</td>
            <td>{{ user.trust }}</td>
            <td>
              <ul class="inline">
                {% if request|permitted('users.edit') %}
                  <li><a href="{{ 'user.edit'|route_url(uid=user.id) }}" aria-label="Edit {{ user.attributes.name }}">{{ icon('pencil') }}</a></li>
                {% endif %}
                {% if request|permitted('users.delete') %}
                  <li><a href="{{ 'user.delete'|route_url(uid=user.id) }}" data-action="post-link" data-confirm-prompt="Please confirm you wish to delete the user {{ user.attributes.name }}?" aria-label="Delete {{ user.attributes.name }}">{{ icon('delete') }}</a></li>
                {% endif %}
              </ul>
            </td>
          </tr>
        {% endfor %}
      </tbody>
      <tfoot>
      </tfoot>
    </table>
  </div>
</section>
{% endblock main %}
