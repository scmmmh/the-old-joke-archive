{% extends 'toja:templates/layout/default.jinja2' %}

{% block title %}{% for part in title %}{{ part[1] }} {% endfor %}{% endblock title %}

{% block main %}
{% from 'toja:templates/macros/jokes.jinja2' import joke_snippet with context%}
{% from 'toja:templates/macros/icons.jinja2' import icon %}
<section class="grid">
  <section class="cell-1-5">
    <h1 class="alt-font">
      {% for part in title %}
        {% if part[0] %}
          <span class="{{ part[0] }}">{{ part[1] }}</span>
        {% else %}
          {{ part[1] }}
        {% endif %}
      {% endfor %}
    </h1>
    <div class="search-result-status margin-top">
      <div class="font-size-small align-bottom">{{ pagination.start }} - {{ pagination.end }} of {{ pagination.total }} jokes</div>
      <ul class="pagination shrink">
        <li><a href="{{ request|update_search_param('page', [pagination.page_start, pagination.page - 1]|max) }}" class="btn alt-small alt-secondary">Previous</a></li>
        {% for idx in range(pagination.page_start, pagination.page_end) %}
          {% if idx == pagination.page %}
            <li><a href="{{ request|update_search_param('page', idx) }}" class="btn alt-small">{{ idx + 1}}</a></li>
          {% else %}
            <li><a href="{{ request|update_search_param('page', idx) }}">{{ idx + 1}}</a></li>
          {% endif %}
        {% endfor %}
        <li><a href="{{ request|update_search_param('page', [pagination.page_end - 1, pagination.page + 1]|min) }}" class="btn alt-small alt-secondary">Next</a></li>
      </ul>
    </div>
    <ol class="search-results">
      {% for joke in jokes %}
        <li>{{ joke_snippet(joke) }}</li>
      {% endfor %}
    </ol>
    <div class="search-result-status margin-top">
      <div class="font-size-small align-bottom">{{ pagination.start }} - {{ pagination.end }} of {{ pagination.total }} jokes</div>
      <ul class="pagination shrink">
        <li><a href="#" class="btn alt-small alt-secondary">Previous</a></li>
        {% for idx in range(pagination.page_start, pagination.page_end) %}
          {% if idx == pagination.page %}
            <li><a href="{{ request|update_search_param('page', idx) }}" class="btn alt-small">{{ idx + 1}}</a></li>
          {% else %}
            <li><a href="{{ request|update_search_param('page', idx) }}">{{ idx + 1}}</a></li>
          {% endif %}
        {% endfor %}
        <li><a href="#" class="btn alt-small alt-secondary">Next</a></li>
      </ul>
    </div>
  </section>
  <form class="cell-6-7" action="{{ 'search'|route_url() }}">
    <h2 class="alt-font">Find something funny</h2>
    <div class="margin-bottom">
      <input type="search" title="Search" name="q" class="shrink" aria-label="Search for jokes by keyword" value="{{ q }}"/>
    </div>
    <h3 class="alt-font">Filters</h3>
  </form>
</section>
{#
<section class="grid">
  <section class="cell-1-5">
    <h1 class="alt-font"><span class="color-brand">Dialog</span> jokes containing <span class="color-brand">woman</span> in <span class="color-brand">Lloyd's Weekly Newspaper</span></h1>
    <div class="search-result-status margin-top">
      <div class="font-size-small align-bottom">1 - 10 of 480 jokes</div>
      <ul class="pagination shrink">
        <li><a href="#" class="btn alt-small alt-secondary">Previous</a></li>
        {% for idx in range(1, 5) %}
          {% if idx == 1 %}
            <li><a href="#" class="btn alt-small">{{ idx }}</a></li>
          {% else %}
            <li><a href="#">{{ idx }}</a></li>
          {% endif %}
        {% endfor %}
        <li><a href="#" class="btn alt-small alt-secondary">Next</a></li>
      </ul>
    </div>
    <ol class="search-results">
      {% for _ in range(0, 10) %}
        <li>{{ joke_snippet() }}</li>
      {% endfor %}
    </ol>
    <div class="search-result-status margin-top">
      <div class="font-size-small">1 - 10 of 480 jokes</div>
      <ul class="pagination shrink">
        <li><a href="#" class="btn alt-small alt-secondary">Previous</a></li>
        {% for idx in range(1, 5) %}
          {% if idx == 1 %}
            <li><a href="#" class="btn alt-small">{{ idx }}</a></li>
          {% else %}
            <li><a href="#">{{ idx }}</a></li>
          {% endif %}
        {% endfor %}
        <li><a href="#" class="btn alt-small alt-secondary">Next</a></li>
      </ul>
    </div>
  </section>
  <form class="cell-6-7" action="{{ 'search'|route_url() }}">
    <h2 class="alt-font">Find something funny</h2>
    <div class="margin-bottom">
      <input type="search" title="Search" class="shrink" aria-label="Search for jokes by keyword" value="woman">
    </div>
    <h3 class="alt-font">Filters</h3>
    <section>
      <h4 class="flex"><span>Category</span> <a href="#" class="shrink" aria-label="Collapse the list of categories">{{ icon('minus-box') }}</a></h4>
      <ul class="filter-list expanded">
        <li>
          <a href="#">
            <span>Dialog</span>
            {{ icon('checkbox-marked') }}
          </a>
        </li>
        <li>
          <a href="#">
            <span>Question &amp; Answer</span>
            {{ icon('checkbox-blank-outline') }}
          </a>
        </li>
        <li>
          <a href="#">
            <span>Humorous Definition</span>
            {{ icon('checkbox-blank-outline') }}
          </a>
        </li>
        <li>
          <a href="#">
            <span>Story</span>
            {{ icon('checkbox-blank-outline') }}
          </a>
        </li>
      </ul>
    </section>
    <section>
      <h4 class="flex"><span>Tags</span> <a href="#" class="shrink" aria-label="Expand the list of tags">{{ icon('plus-box') }}</a></h4>
    </section>
    <section>
      <h4 class="flex"><span>Source</span> <a href="#" class="shrink" aria-label="Collapse the list of sources">{{ icon('minus-box') }}</a></h4>
      <ul class="filter-list expanded">
        <li>
          <a href="#">
            <span>Daily Gazette</span>
            {{ icon('checkbox-blank-outline') }}
          </a>
        </li>
        <li>
          <a href="#">
            <span>Hampshire Telegraph</span>
            {{ icon('checkbox-blank-outline') }}
          </a>
        </li>
        <li>
          <a href="#">
            <span>Lloyd's Weekly Newspaper</span>
            {{ icon('checkbox-marked') }}
          </a>
        </li>
      </ul>
    </section>
    <section>
      <h4 class="flex"><span>Joke Type</span> <a href="#" class="shrink" aria-label="Expand the list of joke types">{{ icon('plus-box') }}</a></h4>
    </section>
    <section>
      <h4 class="flex"><span>Year</span> <a href="#" class="shrink" aria-label="Expand the list of years">{{ icon('plus-box') }}</a></h4>
    </section>
    <div class="btn-group">
      <a href="{{ 'search'|route_url() }}" class="btn alt-secondary">Reset</a>
      <input type="submit" class="btn" value="Update"/>
    </div>
  </form>
</section>
#}
{% endblock main %}
