{% macro joke_ratings(ratings) %}
{% from 'numbers.jinja2' import human_number %}
<div class="joke-rating">
  <ul>
    <li>
      <a href="#" title="LOL">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24">
          <path fill-rule="evenodd" d="M123.71345,71.2532885 C123.71345,74.3614342 120.368421,77.1916639 116.695906,77.1916639 C113.023392,77.1916639 109.678363,74.3614342 109.678363,71.2532885 L109.678363,70.0656134 L123.71345,70.0656134 L123.71345,71.2532885 Z M112.017544,61.751888 L114.356725,61.751888 L114.356725,66.5025882 L112.017544,66.5025882 L112.017544,61.751888 Z M119.035088,61.751888 L121.374269,61.751888 L121.374269,66.5025882 L119.035088,66.5025882 L119.035088,61.751888 Z M116.695906,57.0011877 C110.236257,57.0011877 105,62.3195966 105,68.8779384 C105,75.4362801 110.236257,80.7546891 116.695906,80.7546891 C123.154386,80.7546891 128.391813,75.4362801 128.391813,68.8779384 C128.391813,62.3195966 123.154386,57.0011877 116.695906,57.0011877 L116.695906,57.0011877 Z" transform="translate(-105 -57)"/>
        </svg>
        <span>{{ human_number(ratings['laugh']) }}</span>
      </a>
    </li>
    <li>
      <a href="#" title="Groan">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24">
          <path fill-rule="evenodd" d="M178.030877,75.9998319 C176.865965,74.2955182 174.946667,73.2147339 172.836725,73.2147339 C170.720936,73.2147339 168.803977,74.2967059 167.639064,76.003395 L165.819181,74.1541849 C167.468304,71.9843025 170.034386,70.6362913 172.836725,70.6362913 C175.632047,70.6362913 178.201637,71.9819272 179.854269,74.1494342 L178.030877,75.9998319 Z M168.158363,62.9389692 L170.497544,62.9389692 L170.497544,67.6896695 L168.158363,67.6896695 L168.158363,62.9389692 Z M175.175906,62.9389692 L177.515088,62.9389692 L177.515088,67.6896695 L175.175906,67.6896695 L175.175906,62.9389692 Z M172.836725,57.0005938 C166.377076,57.0005938 161.140819,62.3190028 161.140819,68.8773445 C161.140819,75.4368739 166.377076,80.7540952 172.836725,80.7540952 C179.295205,80.7540952 184.532632,75.4368739 184.532632,68.8773445 C184.532632,62.3190028 179.295205,57.0005938 172.836725,57.0005938 L172.836725,57.0005938 Z" transform="translate(-161 -57)"/>
        </svg>
        <span>{{ human_number(ratings['boo']) }}</span>
      </a>
    </li>
    <li>
      <a href="#" title="Smile">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24">
          <path fill-rule="evenodd" d="M151.783743,66.5019944 L147.10538,66.5019944 L147.10538,64.1266443 L151.783743,64.1266443 L151.783743,66.5019944 Z M144.766199,77.19107 C141.969708,77.19107 139.400117,75.8478095 137.748655,73.6803025 L139.572047,71.8299048 C140.736959,73.5330308 142.655088,74.6150028 144.766199,74.6150028 C146.881988,74.6150028 148.797778,73.5330308 149.96269,71.8239664 L151.783743,73.6755518 C150.13462,75.8454342 147.567368,77.19107 144.766199,77.19107 L144.766199,77.19107 Z M137.748655,64.1266443 L142.427018,64.1266443 L142.427018,66.5019944 L137.748655,66.5019944 L137.748655,64.1266443 Z M144.766199,57.0005938 C138.30655,57.0005938 133.070292,62.3190028 133.070292,68.8773445 C133.070292,75.4368739 138.30655,80.7540952 144.766199,80.7540952 C151.224678,80.7540952 156.462105,75.4368739 156.462105,68.8773445 C156.462105,62.3190028 151.224678,57.0005938 144.766199,57.0005938 L144.766199,57.0005938 Z" transform="translate(-133 -57)"/>
        </svg>
        <span>{{ human_number(ratings['groan']) }}</span>
      </a>
    </li>
  </ul>
</div>
{% endmacro %}

{% macro joke_snippet(joke) %}
{% from 'toja:templates/macros/transcriptions.jinja2' import format_transcription %}
<section class="joke-snippet">
  <div>
    <div class="source-image">
      <a href="#" data-action="image-popup"><img src="{{ 'joke.image'|route_url(jid=joke.id) }}" alt=""></a>
    </div>
  </div>
  <div>
    <div class="metadata">
      <div>
        <h2>Untitled</h2>
        <p>Unundertitled</p>
      </div>
      <time>
        <span>Year</span>
        <span>Day Month</span>
      </time>
    </div>
    <div class="snippet" style="width:100%;">{{ format_transcription(joke.transcription.text) }}</div>
    <div class="classification">
      <ul class="inline">
        <li><a href="#">Categories</a></li>
      </ul>
      <ul class="inline">
        <li><a href="#">Tags</a></li>
    </div>
  </div>
</section>
{% endmacro %}
